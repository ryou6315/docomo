**************************************
redser azueruser Godswl1981!!!      20.110.225.98
reddb  reddbuser Godswl1981!!!
admin Godswl1981!!!

**************************************
sudo apt update
sudo apt upgrade

sudo mysql -u root


apt install build-essential ruby-dev libxslt1-dev libmariadb-dev libxml2-dev zlib1g-dev imagemagick libmagickwand-dev curl gnupg2 bison libbison-dev libgdbm-dev libncurses-dev libncurses5-dev libreadline-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3
sudo apt install -y build-essential zlib1g-dev libssl-dev libreadline-dev libyaml-dev libcurl4-openssl-dev libffi-dev
sudo apt install -y postgresql libpq-dev
sudo apt install -y apache2 apache2-dev
sudo apt install -y imagemagick fonts-takao-pgothic
sudo apt install -y subversion git

sudo addgroup redgrp
useradd -G redgrp redmine
sudo passwd redmine


sudo addgroup apache
useradd -G redgrp apache
sudo passwd apache


psql --host=redmine-db-ou.postgres.database.azure.com --port=5432 --username=redmineuser@redmine-db-ou --dbname=postgres

psql --host=redmine-db-ou.postgres.database.azure.com --port=5432 --username=redmine@redmine-db-ou --dbname=redmine
  password:redmine
  
  
create role redmine LOGIN ENCRYPTED PASSWORD 'Godswl1981!!!' NOINHERIT VALID UNTIL 'infinity';
grant redmine to redmineuser;
create database redmine with encoding='utf-8' owner=redmine;

sudo apt-get install -y libapache2-mod-passenger

sudo apt-get install zypper



myadmin
psql --host=reddb.postgres.database.azure.com --port=5432 --username=reddbuser@reddb.postgres.database.azure.com --dbname=postgres
psql --host=mydemoserver.postgres.database.azure.com --port=5432 --username=myadmin@mydemoserver --dbname=postgres


sudo mkdir /opt/redmine
sudo chown redmine /opt/redmine
sudo -u redmine svn co https://svn.redmine.org/redmine/branches/4.2-stable /var/lib/redmine

mkdir /var/lib/redmine

adapter: postgresql
database: redmine
host: redmine-db-ou.postgres.database.azure.com
username: redmine@redmine-db-ou
password: "Godswl1981!!!"
encoding: utf8



root 
 /opt/redmine/bin
   gem install bundler
   
   sudo apt install imagemagick libmagick++-dev fonts-takao-gothic
   
   sudo bundle install --without development test
   
   sudo apt-get install libfcgi-dev
      
   
   sudo -u redmine bin/rake generate_secret_token
   sudo -u redmine RAILS_ENV=production bin/rake db:migrate
   

   
   
   sudo gem install passenger -N
   sudo passenger-install-apache2-module --auto --languages ruby
   passenger-install-apache2-module --snippet
   
   
   gem install pg -v 1.2.2
   bundle install
   
   mkdir -p tmp tmp/pdf public/plugin_assets
   sudo chown -R redmine:redmine files log tmp public/plugin_assets
   sudo chmod -R 755 files log tmp public/plugin_assets
   
   
   bundle exec rails server webrick -e production
   
   sudo systemctl start apach2.service
   
   [webadmin@dacheat redmine-2.4.3]$ public/dispatch.fcgi
        
        
        
        
        
        
********************************************
zypper in postgresql postgresql-server postgresql-contrib
systemctl status postgresql
find / -name postgresql.conf
su postgres
whoami
psql -version
su - postgres

sudo addgroup redmine
sudo deletegroup redmine
sudo adduser redmine redmine
sudo useradd -G redmine redmine


useradd -G redgrp redmine

CREATE ROLE redmine LOGIN ENCRYPTED PASSWORD 'my_password' NOINHERIT VALID UNTIL 'infinity';
CREATE DATABASE redmine WITH ENCODING='UTF8' OWNER=redmine;


create role redmine LOGIN ENCRYPTED PASSWORD 'Godswl1981!!!' NOINHERIT VALID UNTIL 'infinity';
grant redmine to reddbuser;
create database redmine with encoding='utf-8' owner=redmine;
ls -la|grep redmine
chmod 777 redmine
chown -R root redmine-4.2.0

/root/redmine
which gem
gem install bundler
./bin/bundle install --without development test

/redmine/redmine-4.2.0/bin bundle

/redmine/redmine-4.2.0/
zypper se ruby-devel
zypper in ruby-devel

./bin/bundle install --without development test
zypper se mysql-devel
zypper in mysql-devel

zypper se mysql-devel
zypper in mysql-devel


zypper in libmysqld-devel

zypper se postgres
zypper in postgres

zypper se postgres-devel
zypper in postgres-devel

find / -name libpq-fe.h

zypper se postgres-server-devel
zypper in postgres-server-devel

./bin/bundle exec rake generate_secret_tokenin

date

RAILS_ENV=production ./bin/bundle exec rake db:migrate
RAILS_ENV=production ./bin/bundle exec rake redmine:load default data



./bin/bundle exec rails server webrick -e production


 zypper se libmysqld-devel
 
 
pg_dump -h redmine-db-ou.postgres.database.azure.com -p 5432 -U redmine@redmine-db-ou -d redmine -f redmine.dmp

